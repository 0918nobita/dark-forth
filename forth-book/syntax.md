## シンタックス

Forth のソースコードは、改行またはスペースで区切られた『ワード』の列で表されます。  
ワードは、空白文字を除く任意の文字で構成される文字列です。  
Gforth やその他多くの FORTH 処理系では、ワード名に含まれるアルファベットの大文字/小文字は区別しません。

```
word
!@#$%^&*()
1 2 3 4 5 6 7 8 9 0
5!a
```

## HELLO, FORTH!

Gforth を起動して、以下の文字列をタイピングしてください。

```forth
." HELLO, FORTH!"
```

タイピングが完了すれば、エンターキーを押して FORTH インタプリタにそのコードを解釈させてください。  
すると新たに「HELLO, FORTH!」と出力されるはずです。

※ よくあるミスとして、「``."`` の直後にスペースを入れ忘れていること」があります

<!-- ここで、インタプリタの基本的な挙動について説明する -->

## 処理系をクラッシュさせる

処理系がクラッシュする場合の挙動についても確認しておきます。

```
0 0 !
```

これを解釈させると Invalid Memory Access というエラーが発生します。また、

```
' (QUIT) >BODY 20 ERASE
```

を実行すると同様のエラー内容を出力しながら無限ループが発生します。Control + C で停止できます。

## データスタック

Forth では、「計算結果」や「メモリ上のアドレス」などのデータの一時保存場所として **データスタック** を使用します。
単純な整数値としてのワードは、実行されるとその値をデータスタックに積みます。

```
1 2 3
```

このように入力すると、データスタックに (底の方から順に) 1, 2, 3 が積まれます。データスタックの状態は ``.S`` ワードを用いて確認できます。  
※ 以降、エンターキーを押す箇所では ``[Enter]`` と表記します。

```
.S [Enter] <3> 1 2 3  ok
```

データスタックの先頭要素を破棄するには、``drop`` ワードを使います。

```
drop .S [Enter] <2> 1 2  ok
drop drop .S [Enter] <0>  ok
```

## ワードを定義する

コロン定義と呼ばれる方法で、新たなワードを定義することができます。

```
: hello  ." HELLO, FORTH!" ; [Enter]  ok
hello [Enter] HELLO, FORTH!  ok
```

## 算術操作

``+``, ``-``, ``*``, ``/`` ワードを用いてデータスタック上で整数の演算ができます。

(中置記法での) ``1 + 2 * 6 / 3`` を計算する場合、以下のようになります。

```
1 2 6 * 3 / + .S [Enter] <1> 5  ok
```

### 剰余を求める

``MOD`` ワードを用いて、剰余を求めることができます。

```
7 4 MOD .S [Enter] <1> 3  ok
```

### ``/`` と ``MOD`` の合わせ技

``/MOD`` ワードを用いて、商の整数部分と剰余を一度に求めることができます。剰余 → 商の整数部分の順にデータスタックに積まれます。

```
7 4 /MOD .S [Enter] <2> 3 1  ok
```

## データスタック操作

ここで、データスタック操作に関するいくつかの基本的なワードを紹介しておきます。

### SWAP

``( a b -- b a )``

データスタックの先頭２つの要素の順序を逆にします。

```
1 2 SWAP .S [Enter] <2> 2 1  ok
```

### DUP

``( n -- n n )``

データスタックの先頭要素を複製して積みます。

```
2 DUP .S [Enter] <2> 2 2  ok
```

### OVER

``( a b -- a b a )``

データスタックの先頭から２番目の要素を複製して積みます。

```
1 2 OVER .S [Enter] <3> 1 2 1  ok
```
